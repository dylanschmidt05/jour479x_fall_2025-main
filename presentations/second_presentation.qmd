---
title: "second_presentation"
format: html
---

While I have narrowed down the dataset to games where a team has passed for at least 450 yards, I still need to join a dataset which has who won those games to see just how rare Malik Washington's performances was in a loss. I'm not sure if there's a simple way for me to look at the outcome of the game or if I need to go through that myself. There was no column within college football fastR that displayed the result.

In terms of visualizing my findings, I think having a beeswarm of all the power conference games over the last five years and having the y-axis be passing yards. Then, the dots of teams who ended up losing that game but passed for over 450 passing yards is shown just to see if it is common or not and then label the Maryland game. If there's a better way you think works to show that same thing, I'm open to adjusting the idea.

I'll add another bar chart that shows the number of times each conference has had a team throw for over 450 passing yards to see which conferences are more pass-heavy.


```{r}
library(tidyverse)
library(cfbfastR)
```

```{r}
cfb_data <- load_cfb_pbp(seasons=2014:2025)
```

```{r}
cfb_data |> 
  group_by(play_type) |> 
  summarise (
    total_count = n()
  ) |> 
  arrange(desc(total_count))
```

```{r}
sorted_pass_data <- cfb_data |>
  filter(play_type == "Pass Reception" | play_type =="Passing Touchdown" | play_type =="Play Completion") |> 
  group_by(year, week, pos_team, def_pos_team, home_team, away_team, offense_conference) |> 
  summarise(
    passing_yards = sum(yards_gained)
  ) |> 
  rename(
    team = pos_team,
    opponent = def_pos_team,
    home = home_team,
    away = away_team,
    conference = offense_conference
  )
```

```{r}
over_450_passing <- sorted_pass_data |> 
  filter(passing_yards >= 450)

total_team_450_passing <- over_450_passing |> 
  group_by(team) |> 
  summarise (
    total_count = n()
  ) |> 
  arrange(desc(total_count))
```

```{r}
top_ten_passing_performances <- total_team_450_passing |> 
  top_n(10)
```

```{r}
ggplot() + 
  geom_bar(
    data=top_ten_passing_performances, 
    aes(x=reorder(team, -total_count),
        weight=total_count)) + 
  labs(
    title="Teams with the most games of at least 450 passing yards", 
    subtitle="Washington State relies heavily through the air, with 22 450-passing yard games.",
    x="School", 
    y="Number of 450 passing-yard performances") + 
  theme_minimal() + 
  coord_flip()
```

```{r}
big_ten_450_passing <- over_450_passing |> 
  filter(conference == "Big Ten") |> 
  group_by(team) |> 
  summarise (
    total_count = n()
  ) |> 
  arrange(desc(total_count))
```

```{r}
ggplot() + 
  geom_bar(
    data=big_ten_450_passing, 
    aes(x=reorder(team, -total_count),
        weight=total_count)) + 
  labs(
    title="Big Ten teams with the most games of at least 450 passing yards", 
    subtitle="Purdue has the second-most performances despite being the worst in the conference",
    x="School", 
    y="Number of 450 passing-yard performances") + 
  theme_minimal() + 
  coord_flip()
```
